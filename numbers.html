<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>تعلم الأرقام</title>
  <link rel="stylesheet" href="s.css" />
  <style>
/* 🎬 زر البداية */
#start-btn {
  font-size: clamp(1.2rem, 2vw, 2rem);
  padding: clamp(12px, 2vh, 20px) clamp(20px, 4vw, 40px);
  background: #ff9800;
  color: white;
  border: none;
  border-radius: 15px;
  cursor: pointer;
  margin-top: 20px;
  box-shadow: 0 4px 8px rgba(0,0,0,0.2);
  transition: transform 0.2s, background 0.2s;
  animation: pulse 1.5s infinite;
  width: 100%;
  max-width: 350px;
  text-align: center;
}
#start-btn:hover { background: #e68900; transform: scale(1.1); }
#start-btn:active { transform: scale(0.95); }

@keyframes pulse {
  0%   { transform: scale(1); }
  50%  { transform: scale(1.08); }
  100% { transform: scale(1); }
}

/* 🎨 أزرار التحكم */
.button-container {
  display: flex;
  justify-content: center;
  flex-wrap: wrap;
  gap: 10px;
  margin-top: 20px;
}
.button-container button {
  font-size: 1.2rem;
  font-weight: bold;
  padding: 12px 20px;
  border: none;
  border-radius: 12px;
  cursor: pointer;
  color: #fff;
  transition: transform 0.2s, box-shadow 0.3s;
  animation: pulse 2s infinite;
}
.button-container .prev { background: #2196f3; }   /* أزرق */
.button-container .listen { background: #4caf50; } /* أخضر */
.button-container .next { background: #ff9800; }   /* برتقالي */
.button-container .restart { background: #9c27b0; }/* بنفسجي */

.button-container button:hover {
  transform: scale(1.1);
  box-shadow: 0 4px 12px rgba(0,0,0,0.3);
}

/* شاشة البداية */
#intro-screen {
  position: fixed;
  inset: 0;
  background: linear-gradient(135deg, #fef6e4, #e0f7fa);
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  font-size: 2.2em;
  font-weight: bold;
  color: #333;
  z-index: 20000;
  animation: fadeIn 1s ease-in-out;
}
@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
@keyframes fadeOut { from { opacity: 1; } to { opacity: 0; } }

/* 🪟 النافذة المنبثقة */
#game-popup {
  display: none;
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.5);
  backdrop-filter: blur(2px);
  justify-content: center;
  align-items: center;
  z-index: 10000;
}
#game-popup.show { display: flex; }
#game-popup .popup-box {
  background: white;
  width: 95%;
  max-width: 900px;
  height: 90%;
  max-height: 600px;
  border-radius: 1.5em;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  box-shadow: 0 8px 20px rgba(0,0,0,0.3);
}
#game-popup iframe {
  flex: 1;
  width: 100%;
  height: 100%;
  border: none;
}

/* 📱 تجاوب إضافي */
@media (max-width: 480px) {
  #start-btn { font-size: 1rem; padding: 10px 20px; max-width: 280px; }
  #game-popup .popup-box { height: 80%; }
}
@media (min-width: 1024px) {
  #start-btn { font-size: 2rem; padding: 20px 50px; max-width: 400px; }
  #game-popup .popup-box { height: 70%; }
}

  </style>
</head>
<body>

<!-- ✅ شاشة البداية -->
<div id="intro-screen">
  <h1>🌟 رحلة الأرقام السحرية 🌟</h1>
  <img src="images/-cartoon-boy.png" alt="رسوم كرتونية" style="max-width: 250px; margin: 20px 0;" />
  <button id="start-btn">🚀 هيا نبدأ</button>
  <audio id="intro-audio" src="assets/Numb.mp3" preload="auto"></audio>
</div>
<!-- ✅ زر العودة للرئيسية -->
<div class="top-bar">
  <a href="index.html">
    <button class="home-button">🏠 الرئيسية</button>
  </a>
</div>

<!-- ✅ واجهة الأرقام -->
<div class="main-wrapper" style="display:none;">
  <div class="letter-card">
    <div class="image-wrapper">
      <img id="image" src="images/N0.png" alt="صورة الرقم" />
    </div>
    <audio id="audio"></audio>

    <!-- الأزرار تحت الصورة -->
    <div class="button-container">
      <button class="next" onclick="nextLetter()">👉</button>
      <button class="listen" onclick="playSound()">🔊 استمع</button>
      <button class="prev" onclick="prevLetter()">👈</button>
      <button class="restart" onclick="restart()">🔄 إعادة</button>
    </div>
  </div>
</div>

<!-- ✅ نافذة اللعبة -->
<div id="game-popup">
  <div class="popup-box">
    <iframe id="game-frame" src=""></iframe>
    <div class="popup-buttons" id="popup-buttons"></div>
  </div>
</div>


<script>
let current = 0;
const letters = [
  { image: "images/N0.png", sound: "assets/N0.mp3" },
  { image: "images/N1.png", sound: "assets/N1.mp3" },
  { image: "images/N2.png", sound: "assets/N2.mp3" },
  { image: "images/N3.png", sound: "assets/N3.mp3" },
  { image: "images/N4.png", sound: "assets/N4.mp3" },
  { image: "images/N5.png", sound: "assets/N5.mp3" },
  { image: "images/N6.png", sound: "assets/N6.mp3" },
  { image: "images/N7.png", sound: "assets/N7.mp3" },
  { image: "images/N8.png", sound: "assets/N8.mp3" },
  { image: "images/N9.png", sound: "assets/N9.mp3" },
  { image: "images/N10.png", sound: "assets/N10.mp3" },
];

// بدء التعلم عند الضغط على زر البداية
document.getElementById("start-btn").onclick = () => {
  const introAudio = document.getElementById("intro-audio");
  introAudio.currentTime = 0;
  introAudio.play().catch(()=>{});

  // ننتظر 2 ثواني قبل الدخول
  setTimeout(() => {
    const intro = document.getElementById("intro-screen");
    intro.style.animation = "fadeOut 1s ease-in-out";
    setTimeout(() => {
      intro.style.display = "none";
      document.querySelector(".main-wrapper").style.display = "block";
      update();
    }, 1000);
  }, 2000); // ⬅️ هنا تتحكم فالمدة (2s)
};

function update() {
  document.getElementById("image").src = letters[current].image;
  document.getElementById("audio").src = letters[current].sound;
}

function nextLetter() {
  if (current < letters.length - 1) current++;
  update();
  if (current === 4 || current === 8) {
    openGamePopup();
  } else if (current === letters.length - 1) {
    setTimeout(openGamePopup, 2000);
  }
}

function prevLetter() {
  if (current > 0) current--;
  update();
}

function restart() {
  current = 0;
  update();
}

function playSound() {
  const audio = document.getElementById("audio");
  audio.pause();
  audio.currentTime = 0;
  audio.play();
}

function openGamePopup() {
  document.getElementById("audio").pause();
  let group;
  if (current === 4) group = 1;
  else if (current === 8) group = 2;
  else if (current === letters.length - 1) group = 3;

  document.getElementById("game-frame").src = `gamess.html?group=${group}`;

  const popupBtns = document.getElementById("popup-buttons");
  popupBtns.innerHTML = "";

  const contBtn = document.createElement("button");
  contBtn.className = "continue-btn";
  contBtn.textContent = (group === 3) ? "🎉 أحسنت! العودة" : "✅ استمر التعلم";
  contBtn.onclick = closeGamePopup;
  popupBtns.appendChild(contBtn);

  document.getElementById("game-popup").classList.add("show");
  document.body.style.overflow = "hidden";
}

function closeGamePopup() {
  document.getElementById("game-popup").classList.remove("show");
  document.getElementById("game-frame").src = "";
  document.body.style.overflow = "";
}
</script>

</body>
</html>
